[user]
    name = Afonso Costa
    email = {{ dotfiles_secrets.git.email }}
    signingkey = {{ dotfiles_secrets.git.signing_key }}
[core]
    editor = nano
[pull]
    rebase = true
[rebase]
    autoStash = true
[commit]
    gpgsign = true
[tag]
    gpgsign = true
[init]
    defaultBranch = master
[push]
    autoSetupRemote = true
[alias]
    rebase-dance = "!f() { \
        upstream=$(git remote show origin | awk '/HEAD branch/ {print $NF}'); \
        echo \"ğŸ“¡ Upstream main branch: $upstream\"; \
        if [ -n \"$(git status --porcelain --untracked-files=no)\" ]; then \
            echo 'ğŸ’¾ Stashing tracked changesâ€¦'; \
            git stash && stashed=1; \
        else \
            stashed=0; \
        fi; \
        echo 'â¬‡ï¸  Fetching originâ€¦'; \
        git fetch origin; \
        echo 'ğŸ”„ Rebase in progressâ€¦'; \
        git rebase origin/$upstream; \
        if [ $stashed -eq 1 ]; then \
            echo 'ğŸ“¥ Popping stashâ€¦'; \
            git stash pop; \
        fi; \
        echo 'âœ… Rebase dance complete!'; \
    }; f"
